<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandeau Météo</title>
    <link href="https://fonts.googleapis.com/css2?family=Glacial+Indifference&display=swap" rel="stylesheet"> <!-- Lien vers la police de caractères Glacial Indifference -->
    <style>
        body {
            font-family: 'Glacial Indifference', sans-serif;
        }
        .bandeau {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            height: 50px;
        }
        .bandeau-meteo {
            background-color: #00008B;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centre les éléments verticalement */
            height: 150px;
            padding: 20px;
        }
        .encart-meteo {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .titre {
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .info {
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .info span {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="bandeau" style="background-color: #000; color: #fff;">
        <div style="font-weight: bold; font-size: 1.2em;">PixelPlant</div>
        <div id="datetime" style="font-size: 0.8em;"></div>
    </div>

    <div id="weather" class="bandeau-meteo">
        <div class="encart-meteo">
            <div class="titre">Météo actuelle:</div>
            <div class="info"><span>Température:</span> <span id="temperature"></span></div>
            <div class="info"><span>Pression atmosphérique:</span> <span id="pressure"></span></div>
            <div class="info"><span>Humidité:</span> <span id="humidity"></span></div>
            <div class="info"><span>Point de rosée:</span> <span id="dew-point"></span></div>
            <div class="info"><span>Couverture nuageuse:</span> <span id="cloudiness"></span></div>
            <div class="info"><span>Vitesse du vent:</span> <span id="wind-speed"></span></div>
            <div class="info"><span>Direction du vent:</span> <span id="wind-direction"></span></div>
            <div class="info"><span>Pluie dans l'heure:</span> <span id="rain"></span></div>
        </div>
    </div>

    <script>
        // Fonction pour convertir la direction du vent en abréviation
        function convertWindDirection(degrees) {
            const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];
            const index = Math.round(degrees / 45) % 8;
            return directions[index];
        }

        // Fonction pour calculer le point de rosée
        function calculateDewPoint(temperature, humidity) {
            const a = 17.27;
            const b = 237.7;
            const alpha = ((a * temperature) / (b + temperature)) + Math.log(humidity / 100);
            const dewPoint = (b * alpha) / (a - alpha);
            return dewPoint.toFixed(2); // Renvoie le point de rosée avec 2 décimales
        }

        // Requête à l'API OpenWeatherMap
        const apiKey = "68622df359e1f37849bae38c5fafd8f6";
        const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=Villereau,FR&units=metric&appid=${apiKey}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const temperature = data.main.temp;
                const humidity = data.main.humidity;
                document.getElementById('temperature').textContent = `${temperature} °C`;
                document.getElementById('pressure').textContent = `${data.main.pressure} hPa`;
                document.getElementById('humidity').textContent = `${humidity} %`;
                document.getElementById('dew-point').textContent = `${calculateDewPoint(temperature, humidity)} °C`;
                document.getElementById('cloudiness').textContent = `${data.clouds.all}%`;
                document.getElementById('wind-speed').textContent = `${data.wind.speed} km/h`;
                document.getElementById('wind-direction').textContent = `${convertWindDirection(data.wind.deg)}`;
                if (data.rain && data.rain['1h']) {
                    document.getElementById('rain').textContent = `${data.rain['1h']} mm`;
                } else {
                    document.getElementById('rain').textContent = `Pas de pluie prévue`;
                }
            })
            .catch(error => console.error('Erreur lors de la récupération des données météorologiques :', error));

        // JavaScript pour afficher la date et l'heure
        function displayDateTime() {
            const now = new Date();
            const datetimeElement = document.getElementById('datetime');
            const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', hour12: false };
            const formattedDateTime = now.toLocaleString('fr-FR', options);
            datetimeElement.textContent = formattedDateTime;
        }
        displayDateTime(); // Appel de la fonction pour afficher la date et l'heure actuelles
    </script>
</body>
</html>
