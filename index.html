<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandeau Météo</title>
    <link href="https://fonts.googleapis.com/css2?family=Glacial+Indifference&display=swap" rel="stylesheet"> <!-- Lien vers la police de caractères Glacial Indifference -->
</head>
<body>
    <div class="bandeau" style="background-color: #000; color: #fff; display: flex; justify-content: space-between; align-items: center; height: 50px; padding: 0 20px;">
        <div style="font-weight: bold; font-size: 1.2em; font-family: 'Glacial Indifference', sans-serif;">PixelPlant</div>
        <div id="datetime" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.8em;"></div>
    </div>

    <div id="weather" class="bandeau" style="background-color: #00008B; color: #fff; display: flex; flex-direction: column; align-items: flex-start; height: 150px; padding: 20px;">
        <div style="font-family: 'Glacial Indifference', sans-serif; font-size: 1.1em; margin-bottom: 10px;">Météo actuelle:</div>
        <div id="temperature" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Température: </div>
        <div id="pressure" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Pression atmosphérique: </div>
        <div id="cloudiness" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Couverture nuageuse: </div>
        <div id="wind-speed" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Vitesse du vent: </div>
        <div id="wind-direction" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Direction du vent: </div>
        <div id="rain" style="font-family: 'Glacial Indifference', sans-serif; font-size: 0.9em;">Pluie dans l'heure: </div>
    </div>

    <script>
        // Fonction pour convertir la direction du vent en abréviation
        function convertWindDirection(degrees) {
            const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];
            const index = Math.round(degrees / 45) % 8;
            return directions[index];
        }

        // Requête à l'API OpenWeatherMap
        const apiKey = "68622df359e1f37849bae38c5fafd8f6";
        const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=Villereau,FR&units=metric&appid=${apiKey}`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                document.getElementById('temperature').textContent += `${data.main.temp} °C`;
                document.getElementById('pressure').textContent += `${data.main.pressure} hPa`;
                document.getElementById('cloudiness').textContent += `${data.clouds.all}%`;
                document.getElementById('wind-speed').textContent += `${data.wind.speed} km/h`;
                document.getElementById('wind-direction').textContent += `${convertWindDirection(data.wind.deg)}`;
                if (data.rain && data.rain['1h']) {
                    document.getElementById('rain').textContent += `${data.rain['1h']} mm`;
                } else {
                    document.getElementById('rain').textContent += `Pas de pluie prévue`;
                }
            })
            .catch(error => console.error('Erreur lors de la récupération des données météorologiques :', error));

        // JavaScript pour afficher la date et l'heure
        function displayDateTime() {
            const now = new Date();
            const datetimeElement = document.getElementById('datetime');
            const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', hour12: false };
            const formattedDateTime = now.toLocaleString('fr-FR', options);
            datetimeElement.textContent = formattedDateTime;
        }
        displayDateTime(); // Appel de la fonction pour afficher la date et l'heure actuelles
    </script>
</body>
</html>

